{% extends 'base.html' %}
{% block content %}
<div class="container-center">
    <div class="form-wrapper">
        <h2 style="text-align: center; margin-bottom: 1.5rem;">✏️ Edit Data Film</h2>
        
        <form id="editFilmForm" method="post" enctype="multipart/form-data" class="admin-form">
            <div class="form-group">
                <label>Judul Film</label>
                <input type="text" name="judul" value="{{ film.judul }}" required>
            </div>

            <div class="form-group">
                <label>Kategori</label>
                <select name="id_kategori">
                    {% for k in kategori %}
                    <option value="{{ k.id_kategori }}" {{ 'selected' if k.id_kategori == film.id_kategori }}>
                        {{ k.nama_kategori }}
                    </option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label>Tahun Rilis</label>
                <input type="number" name="tahun" value="{{ film.tahun }}" required>
            </div>

            <div class="form-group">
                <label>Sinopsis</label>
                <textarea name="sinopsis" rows="5" required>{{ film.sinopsis }}</textarea>
            </div>

            <div class="form-group">
                <label>Poster (Kosongkan jika tidak ingin ganti)</label>
                <input type="file" name="poster">
                <p style="font-size: 0.8rem; color: var(--text-muted); margin-top: 5px;">
                    File saat ini: <strong>{{ film.poster }}</strong>
                </p>
            </div>

            <div class="form-actions" style="display: flex; flex-direction: column; gap: 10px; margin-top: 20px;">
                <button type="button" class="btn primary" onclick="confirmSave()" style="width: 100%;">
                    Update Film
                </button>
                <a href="{{ url_for('admin_film') }}" class="btn info" style="text-align: center; text-decoration: none;">
                    Batal
                </a>
            </div>
        </form>
    </div>
</div>

<script>
function confirmSave() {
    showConfirm("Apakah Anda yakin ingin menyimpan perubahan pada film ini?", function() {
        document.getElementById('editFilmForm').submit();
    });
}
</script>
{% endblock %}